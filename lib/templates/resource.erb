<html>
  <head>
    <title><%= "API Documentation: #{@resource["Resource Name"]}" %></title>
    <link rel="stylesheet" href="main.css" />
  </head>

  <body>
    <div id="page">
      <h1><%= @resource["Base Path"] %></h1>
      <p><%= @resource["Abstract"] %></p>

      <h2>Methods</h2>
      <p>Jump to a method</p>
      <ul id="toc">
        <% @resource["Methods"].each do |method, details| %>
          <li><%= "<a href=\"##{method}\">#{details["Verb"]} #{@resource["Base Path"]}/#{method}</a>" %></li>
        <% end %>
      </ul>

      <% @resource["Methods"].each do |method, details| %>
        <%= "<h3 id=\"#{method}\">#{details["Verb"]} #{@resource["Base Path"]}/#{method}</h3>" %>

        <h4>Parameters</h4>
        <ul class="parameters">
          <% details["Parameters"].each do |param, param_details| %>
            <li><tt><%= param %></tt>
              <ul>
                <% # TODO: break out special values, don't just iterate? '%>
                <% param_details.each do |attribute, value| %>
                  <li><%= "#{attribute}: #{value}" %></li>
                <% end %>
              </ul>
            </li>
          <% end %>
        </ul>

        <h4>Response</h4>

        <% (details["Response"] || {}).each do |status, section| %>
          <h5><%= status %></h5>
          <ul>
            <% (section || {}).each do |code, code_details| %>
              <li><%= code %>
                <ul>
                  <% (code_details || {}).each do |attribute, value| %>
                    <li><%= "#{attribute}: #{value}" %></li>
                  <% end %>
                </ul>
              </li>
            <% end %>
          </ul>
        <% end %>

      <% end %>
    </div> <!-- #page -->
  </body>
</html>