<html>
  <head>
    <title><%= "API Documentation: #{@resource.name}" %></title>
    <link rel="stylesheet" href="main.css" />
  </head>

  <body>
    <div id="page">
      <h1><%= @resource.base_path %></h1>
      <p><%= @resource.abstract %></p>

      <h2>Methods</h2>
      <p>Jump to a method</p>
      <ul id="toc">
        <% @resource.actions.each do |action| %>
          <li><%= "<a href=\"##{action.name}\">#{action.verb} #{@resource.base_path}/#{action.name}</a>" %></li>
        <% end %>
      </ul>

      <% @resource.actions.each do |action| %>
        <%= "<h3 id=\"#{action.name}\">#{action.verb} #{@resource.base_path}/#{action.name}</h3>" %>

        <h4>Parameters</h4>
        <ul class="parameters">
          <% action.parameters.each do |parameter| %>
            <li><tt><%= parameter.name %></tt>
              <ul>
                <% # TODO: break out special values, don't just iterate? '%>
                <% parameter.raw.each do |attribute, value| %>
                  <li><%= "#{attribute}: #{value}" %></li>
                <% end %>
              </ul>
            </li>
          <% end %>
        </ul>
    
        <h4>Response</h4>

        <% action.responses.each do |response| %>
          <h5><%= response.status %></h5>
        <% end %>

      <% end %>
    </div> <!-- #page -->
  </body>
</html>